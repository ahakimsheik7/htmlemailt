(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4780],{67281:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Qe}});var r=n(809),o=n.n(r),i=n(26265),a=n(92447),l=n(67294),u=n(37244),s=n.n(u),c=n(19291),d=n(99246),f=n(84054),m=n(65455),p=n(36902),v=n(94797),g=n(49644),S=n(90325),E=n(58886),T=n(47565),b=n(96029),O=n(61792),C=n(57332),I="SegmentationChallenger__bundleSelector__3O4Tm",_=n(14834),y=n(7655),h=n(56746),A=n(82093),N=n(1025),P=n(23996),R=n(2385),k=n(37629),U=n(52253),L=n(41681),D=n(298),w=n(11426),M=n(62482),j=n(92488),G=n(34937),V=(0,G.defineContents)("SegmentationChallengerPageContentType",{pageTitle:{id:"pageTitle",type:"string",placeholderContent:"{ type, select,\n        DAY {Pick a plan - your first {trialTerm, plural, =1 {day is} other {# days are}} free.}\n        WEEK {Pick a plan - your first {trialTerm, plural, =1 {week is} other {# weeks are}} free.}\n        MONTH {Pick a plan - your first {trialTerm, plural, =1 {month is} other {# months are}} free.}\n        other {Pick a plan.}\n      }"},buttonContinue:{id:"buttonContinue",type:"string",placeholderContent:"Continue"},redirectingText:{id:"redirectingText",type:"string",placeholderContent:"Redirecting..."}});function B(e,t){var n,r,o=(null===e||void 0===e||null===(n=e.promotion)||void 0===n?void 0:n.promotionTerm)||"",i=(null===e||void 0===e||null===(r=e.promotion)||void 0===r?void 0:r.promotionTermValue)||0;return t.format(V.pageTitle,{type:o,trialTerm:i})}var F,x,Z,q=n(30137),H=n(8703),K=n(44596),Y=n(70721),Q=n(80827),$=n(84248),W="SegmentationTabs__tabsContainer__3gQG0",J=n(54147),X=n(32292);!function(e){e.COM="COM",e.EDU="EDU",e.GOV="GOV"}(F||(F={})),function(e){e.TEAM="TEAM",e.INDIVIDUAL="INDIVIDUAL",e.ENTERPRISE="ENTERPRISE"}(x||(x={})),function(e){e.DEFAULT="DEFAULT",e.PERPETUAL="PERPETUAL",e.TRIAL="TRIAL",e.BASE="BASE",e.PROMOTION="PROMOTION"}(Z||(Z={}));var z=(0,G.defineContents)("ImageContentType",{publishUrl:{id:"_publishUrl",type:"string"},authorUrl:{id:"_authorUrl",type:"string"}}),ee=(0,G.defineContents)("SegmentationTab",{title:{id:"title",type:"string"},defaultIcon:{id:"defaultIcon",type:z},selectedIcon:{id:"selectedIcon",type:z},marketSegment:{id:"marketSegment",type:"string"},customerSegment:{id:"customerSegment",type:"string"},offerType:{id:"offerType",type:"string"}}),te=(0,G.defineContents)("SegmentationTabs",{pickerLabel:{id:"pickerLabel",type:"string",placeholderContent:"Show me plans for:"},segmentations:{id:"segmentations",type:ee,isArray:!0,placeholderContent:[{title:"Individuals",defaultIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/individuals-default.svg"},selectedIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/individuals-selected.svg"},customerSegment:x.INDIVIDUAL,marketSegment:F.COM},{title:"Students and teachers",defaultIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/students-and-teachers-default.svg"},selectedIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/students-and-teachers-selected.svg"},customerSegment:x.INDIVIDUAL,marketSegment:F.EDU},{title:"Business",defaultIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/teams-default.svg"},selectedIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/teams-selected.svg"},customerSegment:x.TEAM,marketSegment:F.COM},{title:"Schools and universities",defaultIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/schools-and-universities-default.svg"},selectedIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/schools-and-universities-selected.svg"},customerSegment:x.TEAM,marketSegment:F.EDU}]}}),ne=n(11168),re=n(71263),oe=n(17182),ie="SegmentationTab__tabContainer__1dnov",ae="SegmentationTab__tabIcon__2tUg2",le="SegmentationTab__tabLabel__1VAlC",ue=l.createElement,se=function(e){var t=e.id,n=e.isSelected,r=e.label,o=e.defaultIcon,i=e.selectedIcon;return ue("div",{className:ie,"data-testid":"segmentation-tab-item-".concat(t)},function(e,t,n){return ue("div",{className:ae},e?n:t)}(n,o,i),ue("span",{className:le,"data-testid":"segmentation-tab-label"},r))},ce=n(52007),de=n(49865),fe=l.createElement;function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e,t){var n=e._publishUrl;return fe("img",{src:n,role:"presentation",alt:"","aria-labelledby":t})}var ve=(0,de.r)("segmentationTabs",te)((function(e){var t=e.onSelect,n=e.segmentations,r=e.selectedTabId,o=(0,J.VB)(J.yr),a=(0,G.useContentEntry)(te),u=a.get(te.pickerLabel),s=(0,ce.useTrackEvent)(),c=function(e,t){var n=e.get("segmentations");return Array.isArray(n)&&t.map((function(e){var t=e||{},r=t.id,o=t.customerSegment,i=t.marketSegments,a=t.offerType,l=i||[""],u=(0,X.Z)(l,1)[0],s=n.find((function(e){return e.marketSegment===u&&e.customerSegment===o&&(!e.offerType||e.offerType===a)}))||{},c=s.title,d=void 0===c?"":c,f=s.defaultIcon,m=void 0===f?"":f,p=s.selectedIcon;return{id:r,title:d,defaultIcon:m,selectedIcon:void 0===p?"":p,customerSegment:o,marketSegment:u,offerType:a}}))}(a,(0,l.useMemo)((function(){return n.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.offer)}))}),[n])),d=function(e){var n=c.find((function(t){return t.id===e})),o=n.customerSegment,i=n.marketSegment;n.id!==r&&f(o,i),t&&t(e)},f=function(e,t){var n;n=e===R.op.Individual?t===R.ii.Com?U.ps.SEGMENTATION_TAB_INDIVIDUAL:U.ps.SEGMENTATION_TAB_STUDENTS_TEACHERS:t===R.ii.Edu?U.ps.SEGMENTATION_TAB_SCHOOL_UNIVERSITY:U.ps.SEGMENTATION_TAB_TEAM;var r="".concat(n,":").concat(U.ps.SEGMENTATION_TAB_CLICK),o="".concat(n).concat(U.ps.SEGMENTATION_TAB),i=(0,D.W6)(r,o);s(i)};return fe("div",{className:W,"data-testid":"segmentation-tabs-container"},o?fe(ne.cW,{isQuiet:!0,onSelectionChange:d,selectedKey:r,"data-testid":"segmentation-picker","aria-label":"Show me plans for",label:u},c.map((function(e){var t=e||{},n=t.id,r=t.title;return fe(re.ck,{key:n},r)}))):fe(oe.mQ,{selectedKey:r,onSelectionChange:d,"data-testid":"segmentation-tabs","aria-label":"Show me plans for"},fe(oe.td,null,c.map((function(e){var t=e||{},n=t.id,o=t.title,i=t.defaultIcon,a=t.selectedIcon;return fe(re.ck,{key:n},fe(se,{id:n,isSelected:r===n,label:o,defaultIcon:pe(i,o),selectedIcon:pe(a,o)}))})))))})),ge=n(36623),Se=n(15257),Ee=n(46839),Te=n(69047),be=n(30488),Oe=n(37703),Ce=n(13164),Ie=n(4190),_e=n(61274),ye=n(62452),he=n(64718),Ae=n(96909),Ne=n(5764),Pe=n(12510),Re=n(21346),ke=n(60718),Ue=l.createElement;function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var we=(0,de.r)("segmentationChallengerPage",V)((function(){var e,t,n,r=(0,G.useContentEntry)(V),o=(0,Ne.R_)(),a=o.goToNextStep,u=o.hasPreviousStep,c=(0,ye.eR)(Q.N$.EXTERNAL),p=(0,ye.nV)(),v=(0,ye.nV)(L.ki.BUSINESS_TRIAL),g=(0,Oe.useDispatch)(),E=(0,Pe.useStore)().getState(),T=(0,Oe.useSelector)(m.mT),C=(0,Oe.useSelector)(m.Im),F=(0,Oe.useSelector)(O.H0),x=(0,Oe.useSelector)(m.n$),Z=(0,Oe.useSelector)(O.et).userId,W=(0,Oe.useSelector)(b.vl),J=s().app,X=J.PA_CODE,z=J.OFFER_TYPE,ee=J.ORIGINAL_OFFER_ID,te=J.CLIENT_ID,ne=J.SVAR,re=J.ITEMS,oe=W[X.name],ie=W[z.name],ae=W[te.name],le=W[ne.name],ue=(0,Oe.useSelector)(b.By)===s().app.LAYOUT.values.SLIM,se=(0,w.Nk)(),de=se.setBundleSourceOffer,fe=se.setIsBundleOfferSelected,me=(0,Oe.useSelector)(w.tT),pe=(0,Oe.useSelector)(m.S2),Le=(0,Ae.W)(),we=Le.showApplePay,Me=Le.showGooglePay,je=(0,l.useState)(!1),Ge=je[0],Ve=je[1],Be=(0,l.useState)(!1),Fe=Be[0],xe=Be[1],Ze=(0,l.useState)(!1),qe=Ze[0],He=Ze[1],Ke=(0,be.useCommerceAppContext)().isInApp,Ye=(0,Oe.useSelector)(m.dm),Qe=Ye.teamAdminConsoleUrl,$e=Ye.teamCCPlansUrl,We=Ye.teamCCEduPlansUrl,Je=Ye.teamDocumentPlansUrl,Xe=Ye.desktopTrialDownloadUrl,ze=(0,Ie.useFeatureFlags)([d.R.UC_M5])[d.R.UC_M5],et=(0,_e.d0)(),tt=(0,Re.z)(),nt=(0,ce.useTrackEvent)(),rt=U.ps.PLAN_PICK_ROUTE,ot=(0,Ie.useFeatureFlags)([d.R.P_UC_USE_TEST_CAMPAIGNS])[d.R.P_UC_USE_TEST_CAMPAIGNS],it=(0,he.a)(f.VQ,{variables:(0,f.tH)(T,oe,x,ie,Z,ae,le,et,ot)}),at=it.error,lt=it.loading,ut=it.data.segmentationBundleOffers,st=ut.map((function(e){return e.segmentationOffer}))||[];if(!ze&&!pe){for(var ct=JSON.parse(JSON.stringify(st)),dt=0;dt<ct.length;dt++){var ft,mt=null===(ft=ct[dt])||void 0===ft?void 0:ft.offer;if((null===mt||void 0===mt?void 0:mt.offerType)===$.R.TRIAL&&(null===mt||void 0===mt?void 0:mt.customerSegment)===R.op.Team){ct[dt].offer.promotion.promotionTermValue=7;break}}st=JSON.parse(JSON.stringify(ct))}var pt=(0,S.V$)(W,st),vt=(0,l.useState)(pt),gt=vt[0],St=vt[1],Et=(0,Ce.T)(),Tt=ut.reduce((function(e,t){var n,r=null===t||void 0===t||null===(n=t.segmentationOffer)||void 0===n?void 0:n.offer;return(null===r||void 0===r?void 0:r.id)===gt&&r.customerSegment===R.op.Individual&&r.marketSegments.includes(R.ii.Com)&&0===(e=t.bundleOffers.map((function(e){return e.offer}))).length?[t.segmentationOffer.offer]:e}),[]),bt=(0,Oe.useSelector)(b.yq),Ot=Tt.filter((function(e){return e.id===(null===bt||void 0===bt?void 0:bt[0])})).length>0,Ct=Ot&&null!==(e=null===bt||void 0===bt?void 0:bt[0])&&void 0!==e?e:pt,It=(0,l.useState)(Ct),_t=It[0],yt=It[1],ht=W[re.name]&&Ot?W:De(De({},W),{},(0,i.Z)({},re.name,[{id:pt}])),At=(0,l.useState)(ht),Nt=At[0],Pt=At[1],Rt={offers:Tt,selectedOfferId:_t};(0,l.useEffect)((function(){var e=(null===bt||void 0===bt?void 0:bt[0])||Ct;if(!at&&!lt&&Rt.offers.length>0&&!me){var t,n=Rt.offers.find((function(t){return(null===t||void 0===t?void 0:t.id)===e}));de(e,null===n||void 0===n||null===(t=n.offerContent)||void 0===t?void 0:t.productName)}}),[Rt.offers.length,bt,me,Rt.offers,de,at,lt,Ct]);var kt=(0,l.useRef)({isDefaultSegmentSelected:!0}),Ut=(0,l.useRef)({isDefaultSelected:!0});(0,l.useEffect)((function(){if(gt){if(kt.current.isDefaultSegmentSelected){Et(k.P.PAGE_LOAD,{offers:st,selectedOfferId:gt});var e=(0,Se.SQ)(st,gt,!0),t=e.offer,n=e.selectedPodEvent,r=e.flowTypeAttributes,o=(0,D.Nf)(t,r,E,ze,U.RC.EVENT_STATE_TYPE,n,pe,rt,we,Me);tt(o)}else{Et(k.P.SEGMENT_SELECTED,{offers:st,selectedOfferId:gt});var i=(0,Se.SQ)(st,gt,!1),a=i.offer,l=i.selectedPodEvent,u=i.flowTypeAttributes,s=(0,D.Nf)(a,u,E,ze,U.RC.EVENT_LINK_TYPE,l,pe,rt);tt(s)}kt.current.isDefaultSegmentSelected=!1}}),[gt]);var Lt=null===Tt||void 0===Tt?void 0:Tt.reduce((function(e,t,n){var r,o=null===t||void 0===t?void 0:t.offerContent,a=null===o||void 0===o?void 0:o.productName,l=n+1;return{content:De(De({},e.content),{},(0,i.Z)({},l,o)),productArrangementCodes:De(De({},e.productArrangementCodes),{},(0,i.Z)({},l,t.productArrangementCode)),productLogoUrls:De(De({},e.productLogoUrls),{},(0,i.Z)({},l,o.productIconUrls)),descriptionVariables:De(De({},e.descriptionVariables),{},(r={},(0,i.Z)(r,"product".concat(n+1),a),(0,i.Z)(r,"totalNumberOfBundleOffers",l),r))}}),{}),Dt=(0,G.useContentEntry)(void 0,!0);!function(){if((0,K.$D)(Tt)){var e=Dt.get("bundleContentList"),t=Dt.get("bestValueList");if(t&&e){var n=e.items[0].bestValue,r=t.items[0];n.label=r.label,n.variant=r.variant}}}();var wt=null===Tt||void 0===Tt?void 0:Tt.find((function(e){return(null===e||void 0===e?void 0:e.id)===_t})),Mt=null===wt||void 0===wt?void 0:wt.offerContent,jt=null===wt||void 0===wt||null===(t=wt.productArrangement)||void 0===t?void 0:t.cloud,Gt=$.R[null===wt||void 0===wt?void 0:wt.offerType],Vt=null===wt||void 0===wt?void 0:wt.productArrangementCode,Bt=null===wt||void 0===wt||null===(n=wt.offerContent)||void 0===n?void 0:n.productIconUrls;function Ft(e){var t=W[s().app.ITEMS.name],n=Object.assign({},null===t||void 0===t?void 0:t[0]);n&&(n.id=e);var r=De(De({},W),{},(0,i.Z)({},s().app.ITEMS.name,[n]));yt(e),Pt(r),function(e){var t=(0,Se.xy)(Rt.offers,e,Ut.current.isDefaultSelected),n=t.offer,r=t.selectedPodEvent,o=t.flowTypeAttributes,i=(0,D.Nf)(n,o,E,ze,Ut.current.isDefaultSelected?U.RC.EVENT_STATE_TYPE:U.RC.EVENT_LINK_TYPE,r,void 0,rt,we,Me);tt(i),Ut.current.isDefaultSelected=!1}(e)}function xt(e){return st.find((function(t){return(null===t||void 0===t?void 0:t.offer.id)===e}))}function Zt(){var e;qt()&&(Nt[ee.name]=null===(e=Ht(R.op.Individual,R.ii.Com))||void 0===e?void 0:e.id);fe(me!==_t);var t=(0,D.W6)("".concat(U.ps.PLAN_PICK_ROUTE,":").concat(U.ps.CONTINUE,":").concat(U.ps.CLICK),U.ps.CONTINUE);nt(t),a(Nt)}(0,l.useEffect)((function(){Fe&&Zt(),xe(!1)}),[Fe]);var qt=function(){var e=Ht(R.op.Individual,R.ii.Com),t=Ht(R.op.Individual,R.ii.Edu);return e&&t&&e.productArrangement.family!==t.productArrangement.family&&t.id===_t},Ht=function(e,t){var n;return null===(n=st.find((function(n){return(null===n||void 0===n?void 0:n.offer.customerSegment)===e&&(null===n||void 0===n?void 0:n.offer.marketSegments.includes(t))})))||void 0===n?void 0:n.offer};return Ue(l.Fragment,null,qe?Ue(q.b,{workflow:F?H.q.TEAM_ADMIN:H.q.BUSINESS_TRIAL}):Ue(ke.Ru,{showOneColumnOnDesktop:!ue},Ue(ke.uN,null,Ue(h.AppErrorBoundary,{logMeta:{componentName:"Bundle",errorLoadingComponent:"StepHeader"}},Ue(Ee.l,{title:B(wt,r)})),Ue(ve,{onSelect:function(e){var t,n;St(e),yt(e),g((0,ge.$C)(e));var r=null!==(t=null===(n=xt(e))||void 0===n?void 0:n.offer)&&void 0!==t?t:{},o=r.customerSegment,i=r.marketSegments,a=r.offerType;o===R.op.Individual&&i.includes(R.ii.Edu)&&(Ft(e),xe(!0)),o===R.op.Team&&(Ve(!0),setTimeout((function(){yt(Ct),St(pt),Ve(!1)}),10),setTimeout((function(){!function(e,t){if(F)Ke()?(He(!0),p((0,M.AK)(Qe))):c(Qe);else if(e===$.R.TRIAL)if(ze||pe){var n=(0,M.dy)(t,T,x);Ke()?(He(!0),v(n)):c(n)}else{var r=(0,j.getLocalizedURL)(Xe,C);c(r)}else{var o,i,a,l,u=(null===(o=xt(t))||void 0===o?void 0:o.offer)||{};a=(null===(i=u.productArrangement)||void 0===i?void 0:i.cloud)===P.e.DOCUMENT?Je:null!==(l=u.marketSegments)&&void 0!==l&&l.includes(R.ii.Com)?$e:We,Ke()?(He(!0),p((0,M.AK)(a))):c(a)}}(a,e)}),15))},code:oe,segmentations:st,selectedTabId:gt}),Tt.length>0?Ue("div",{className:I},Lt&&Ue(A.$G,{bundleDescriptionVariables:Lt.descriptionVariables,locale:x,offerContents:Lt.content,productArrangementCodes:Lt.productArrangementCodes,productLogoUrls:Lt.productLogoUrls}),wt&&Ue(Te.o,{offer:wt}),Ue(A.O0,{onSelectionChange:Ft,bundleData:Rt})):Ge&&Ue(Y.a,{message:r.get(V.redirectingText),showRedirect:!0}),Tt.length>0&&Ue(_.s,{ctaLabel:r.get(V.buttonContinue),onCtaClick:Zt,showBackButton:u()})),Ue(ke.Wh,{showOneColumnOnDesktop:!ue},Ue(h.AppErrorBoundary,{logMeta:{componentName:"SegmentationChallenger",errorLoadingComponent:"AllPlansInclude"}},Ue(y.R,{cloud:jt,offerType:Gt,offerContent:Mt,productArrangementCode:Vt,productLogoUrls:Bt})),Ue(h.AppErrorBoundary,{logMeta:{componentName:"Segmentation",errorLoadingComponent:"ClarityTerms"}},Ue(N.J,{offer:wt,isInOneColumn:!ue})))))})),Me=we.queryCollection;Me.merge(y.R.queryCollection),Me.merge(A.$G.queryCollection),Me.merge(Te.o.queryCollection),Me.merge(A.sH.queryCollection),Me.merge(N.J.queryCollection),Me.merge(ve.queryCollection);var je=n(17327),Ge=n(46576),Ve=n(40102),Be=l.createElement;function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ze=["/pcs/compare"],qe=function(){var e=(0,Pe.useStore)(),t=(0,Ie.useFeatureFlags)([d.R.UC_FORCE_SEGMENTATION_CHALLENGER]),n=e.getShouldRenderSegmentationChallenger(t);return(0,Ge.Vk)(),Be(n?we:f.vI,null)},He=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,a,l,u,I,_,y,h,A,N,P,R,k,U,L,D,w,M,j,G,V,B,F,x,Z,q;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I=t.apolloClient,_=t.features,y=t.res,h=t.store,A=t.logger,N=h.getState(),P=(0,m.mT)(N),R=(0,m.n$)(N),k=(0,b.vl)(N)[s().app.PA_CODE.name],U=(0,b.vl)(N)[s().app.OFFER_TYPE.name],L=null===(n=(0,O.et)(N))||void 0===n?void 0:n.userId,D=(0,b.vl)(N)[s().app.CLIENT_ID.name],w=(0,b.vl)(N)[s().app.SVAR.name],M=(0,T.j)(N,_.includes(d.R.UC_FLEXIBLE_PROMOTIONS)),null===y||void 0===y||!y.writableEnded){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,(0,E.C)(N,t.logger);case 14:return j=e.sent,(0,c._H)(j,null===(r=t.req)||void 0===r||null===(a=r.headers)||void 0===a?void 0:a.cookie),e.next=18,I.query({query:f.VQ,variables:(0,f.tH)(P,k,R,U,L,D,w,M,_.includes(d.R.P_UC_USE_TEST_CAMPAIGNS)),context:xe({},j)});case 18:if(G=e.sent,N=h.getState(),null===G||void 0===G||!G.errors||(o=null===G||void 0===G?void 0:G.errors,(0,p.yC)(o).every((function(e){return Ze.includes(null===e||void 0===e?void 0:e.path)})))){e.next=25;break}if(V={currentRoute:C.Z.SEGMENTATION},!(B=(0,v.S2)(G.errors,I,h,V))){e.next=25;break}return e.abrupt("return",{error:B});case 25:if(null!==(F=null===G||void 0===G||null===(l=G.data)||void 0===l?void 0:l.segmentationBundleOffers)&&void 0!==F&&F.length){e.next=28;break}throw(0,g.n)();case 28:return A.info((0,S.qj)(F),"Segmentation Bundle Offers Response"),x=(0,S.IG)(null===(u=F[0].segmentationOffer)||void 0===u?void 0:u.offer),h.dispatch((0,ge.fC)(x)),Z=F[0].id,q=xe(xe({},(0,b.vl)(N)),{},(0,i.Z)({},s().app.ITEMS.name,[{id:Z}])),(0,Ne.OK)(t,C.Z.SEGMENTATION,{features:_,newQueryParams:q}),e.abrupt("return",{segmentationOfferId:Z});case 35:case"end":return e.stop()}var o}),e)})));return function(t){return e.apply(this,arguments)}}();function Ke(e,t){e.info((0,S.W1)(t),"Segmentation Offers Response")}qe.getInitialProps=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,a,l,u,p,v,S,I,_,y,h,A,N,P,R,k,U,L,D,w,M,j,G,V,B,F,x;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_=t.apolloClient,y=t.features,h=t.res,A=t.store,N=t.logger,!A.getShouldRenderSegmentationChallenger((0,i.Z)({},d.R.UC_FORCE_SEGMENTATION_CHALLENGER,null===y||void 0===y?void 0:y.includes(d.R.UC_FORCE_SEGMENTATION_CHALLENGER)))){e.next=4;break}return e.abrupt("return",He(t));case 4:return P=A.getState(),R=(0,m.mT)(P),k=(0,m.n$)(P),U=(0,b.vl)(P)[s().app.PA_CODE.name],L=(0,b.vl)(P)[s().app.OFFER_TYPE.name],D=null===(n=(0,O.et)(P))||void 0===n?void 0:n.userId,w=(0,b.vl)(P)[s().app.CLIENT_ID.name],M=(0,b.vl)(P)[s().app.SVAR.name],j=(0,T.j)(P,y.includes(d.R.UC_FLEXIBLE_PROMOTIONS)),e.next=15,(0,E.C)(P,t.logger);case 15:if(G=e.sent,null===h||void 0===h||!h.writableEnded){e.next=18;break}return e.abrupt("return");case 18:return(0,c._H)(G,null===(r=t.req)||void 0===r||null===(a=r.headers)||void 0===a?void 0:a.cookie),e.next=21,_.query({query:f.j_,variables:(0,f.WC)(R,U,k,L,D,w,M,j,null===y||void 0===y?void 0:y.includes(d.R.P_UC_USE_TEST_CAMPAIGNS)),context:xe({},G)});case 21:if(V=e.sent,P=A.getState(),null!==(B=null===V||void 0===V||null===(l=V.data)||void 0===l||null===(u=l.segmentationOffers)||void 0===u||null===(p=u.result[0])||void 0===p?void 0:p.offers)&&void 0!==B&&B.length){e.next=26;break}throw(0,g.n)();case 26:return Ke(N,null===V||void 0===V||null===(v=V.data)||void 0===v?void 0:v.segmentationOffers),F=null===(S=B[0])||void 0===S||null===(I=S.offer)||void 0===I?void 0:I.id,x=xe(xe({},(0,b.vl)(P)),{},(0,i.Z)({},s().app.ITEMS.name,[{id:F}])),(0,Ne.OK)(t,C.Z.SEGMENTATION,{features:y,newQueryParams:x}),e.abrupt("return",{segmentationOfferId:F});case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Ye=je.G.queryCollection;Ye.merge(we.queryCollection);var Qe=(0,Ve.O)(Ye,C.Z.SEGMENTATION)(qe)},17775:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/segmentation",function(){return n(67281)}])}},function(e){e.O(0,[9774,7949,9022,532,6618,809,7946,3433,8710,5898,1586,6609,6188,1721,9332,4667,7642,4106,2e3,5839,898,9490,9174,7779,3728,5454,6224,7957,1913,718,4598,4465,4054,8618],(function(){return t=17775,e(e.s=t);var t}));var t=e.O();_N_E=t}]);