(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4054],{30137:function(e,t,n){"use strict";n.d(t,{b:function(){return A},t:function(){return ae}});var r=n(67294),o=n(12398),i=n(93101),a=n(69429),u=n(298),l=n(65455),c=n(49313),s=n(34937),d=(0,s.defineContents)("externalworkflowpage",{headerDefault:{id:"headerDefault",type:"string",placeholderContent:"If you've made your purchase, get started now. (PH)"},messageDefault:{id:"messageDefault",type:"string",placeholderContent:"Please complete the purchase in your web browser. If you would like to purchase later, you can cancel now. (PH)"},cancelButtonDefault:{id:"cancelButtonDefault",type:"string",placeholderContent:"Cancel (PH)"},continueButtonDefault:{id:"continueButtonDefault",type:"string",placeholderContent:"Get Started (PH)"},headerChangePlan:{id:"headerChangePlan",type:"string",placeholderContent:"Switch your plan in your Adobe Account. (PH)"},messageChangePlan:{id:"messageChangePlan",type:"string",placeholderContent:"Once you are done, come back here and click Continue to proceed. If you would like to continue later, you can cancel for now. (PH)"},cancelButtonChangePlan:{id:"cancelButtonChangePlan",type:"string",placeholderContent:"Cancel (PH)"},continueButtonChangePlan:{id:"continueButtonChangePlan",type:"string",placeholderContent:"Continue (PH)"}}),f=n(8703),p=n(66537),m=n(52253),v=n(30488),g=n(12510),h=n(52007),C=n(3971),E=n(36015),y=r.createElement,A=(0,C.withAEMContent)("checkout/external",d.__contentType,d)((function(e){var t=e.workflow,n=(0,s.useContentEntry)(d),C=(0,v.useCommerceAppContext)().emitMessage,A=(0,h.useTrackEvent)();(0,r.useEffect)((function(){var e=(0,u.W6)("".concat(t).concat(m.ps.COMPLETE_PURCHASE_WEB,":").concat(m.ps.MODAL),"".concat(m.ps.COMPLETE_PURCHASE_WEB));A(e)}),[A,t]);var S=function(e){switch(e){case f.q.CHANGE_PLAN:return{header:n.get(d.headerChangePlan),message:n.get(d.messageChangePlan),cancelButton:n.get(d.cancelButtonChangePlan),continueButton:n.get(d.continueButtonChangePlan)};default:return{header:n.get(d.headerDefault),message:n.get(d.messageDefault),cancelButton:n.get(d.cancelButtonDefault),continueButton:n.get(d.continueButtonDefault)}}}(t),T=S.header,P=S.message,b=S.cancelButton,_=S.continueButton,O=(0,g.useStore)(),I=(0,l.jz)(O.getState());return y("div",{className:a.Z.container},!I&&y("div",{className:a.Z.closeContainer},y(o.default,{variant:"action",quiet:!0,onClick:function(){C(v.SystemMessage.CLOSE)},icon:y(i.default,{size:"L"}),"data-testid":"closeButton"})),y("div",{className:a.Z.center},y(p.InfoLight,{size:"L","data-testid":"externalWorkflowIcon"}),y(c.X6,null,T),y("p",{className:a.Z.message},P),y("div",{className:a.Z.buttonContainer},y(o.default,{variant:"secondary","data-testid":"externalWorkflowCancelButton",onClick:function(){var e=(0,u.W6)("".concat(t).concat(m.ps.COMPLETE_PURCHASE_WEB,":").concat(m.ps.CANCEL),"".concat(m.ps.COMPLETE_PURCHASE_WEB).concat(m.ps.CANCEL));A(e),C(v.SystemMessage.CLOSE)}},b),y(o.default,{variant:"cta","data-testid":"externalWorkflowContinueButton",onClick:function(){var e=(0,u.W6)("".concat(t).concat(m.ps.COMPLETE_PURCHASE_WEB,":").concat(m.ps.GET_STARTED),"".concat(m.ps.COMPLETE_PURCHASE_WEB).concat(m.ps.GET_STARTED));A(e),C(v.SystemMessage.CLOSE,{shouldTriggerLicenseCheck:!0,status:E.WorkflowStatus.ORDER_COMPLETE})}},_))))})),S=n(26075),T=n(55077),P=n(27261),b=n(92471);function _(){var e=(0,P.Z)(["\n  query UserSubscriptionChangePlanQuery($offerId: ID!, $subscriptionId: ID!) {\n    user {\n      id\n      userSubscription(subscriptionId: $subscriptionId) {\n        id\n        changePlanAllowed(offerId: $offerId)\n      }\n    }\n  }\n"]);return _=function(){return e},e}function O(){var e=(0,P.Z)(["\n  fragment IneligiblePurchaseOrderFragment on Order {\n    marketSegment\n    country\n    cart {\n      cartItems {\n        offerId\n        conflicts {\n          offerId\n          reasonCode\n          subscriptionId\n        }\n      }\n    }\n  }\n"]);return O=function(){return e},e}function I(){var e=(0,P.Z)(["\n  query getOfferForIneligiblePurchaseQuery($offerId: ID!, $country: String!) {\n    offer(id: $offerId, country: $country) {\n      ...IneligiblePurchaseOfferFragment\n    }\n  }\n  ","\n"]);return I=function(){return e},e}function U(){var e=(0,P.Z)(["\n  fragment IneligiblePurchaseOfferFragment on Offer {\n    id\n    commitment\n    term\n    productArrangement {\n      cloud\n      family\n    }\n    offerContent {\n      productName\n      productIconUrls\n    }\n  }\n"]);return U=function(){return e},e}var k=(0,b.Ps)(U()),R=(0,b.Ps)(I(),k),L=(0,b.Ps)(O()),N=(0,b.Ps)(_()),x=function(e,t,n){return e.query({query:R,variables:{offerId:t,country:n}}).then((function(e){return e.data.offer}))},w=n(62482),D=n(36623),M=n(26265),B=n(809),F=n.n(B),G=n(92447),Z=n(38347),W=n(91229),H=n(85564),j=n.n(H),Y=n(37244),q=n.n(Y),V=n(7585),$=n(61792),z=n(73728),K=n(62452),Q=n(85686),J=r.createElement,X=function(e){return J(V.a,null,(function(t){return J(ee,(0,W.Z)({client:t},e))}))},ee=function(e){var t=e.client,n=e.openUrl,o=e.onFooterClicked,i=(0,Z.Z)(e,["client","openUrl","onFooterClicked"]),a=(0,Q.useLogger)(),u=(0,r.useContext)(g.StoreContext).getState(),c=(0,l.n$)(u),s=(0,g.useSelector)(D.NO),d=(0,$.hP)(u),f=(0,$.et)(u),p=null===f||void 0===f?void 0:f.userId,m=(0,K.tD)(),v=m.redirect,h=m.cancelUrl,C=null!==n&&void 0!==n?n:v,E=(0,K.Sd)(),y=t.readFragment({fragment:L,id:"Order:".concat(s),fragmentName:"IneligiblePurchaseOrderFragment"}),A=(0,r.useCallback)(function(){var e=(0,G.Z)(F().mark((function e(n,r){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t]),S=(0,r.useCallback)((function(e,n){return function(e,t,n,r){return e.query({query:N,variables:{offerId:t,subscriptionId:n},context:r,fetchPolicy:"network-only"}).then((function(e){var t=(e.data.user||{}).userSubscription;return null===t||void 0===t?void 0:t.changePlanAllowed})).catch((function(){return!1}))}(t,e,n,d?{headers:{authorization:d}}:{})}),[t,d]),P=(0,r.useCallback)(function(){var e=(0,G.Z)(F().mark((function e(n){var r,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.getIndividualToTeamUpgradeOffers)(t,n,p,c);case 2:return r=e.sent,o=r.data,e.abrupt("return",{data:o});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,c,p]),b=(0,r.useCallback)(function(){var e=(0,G.Z)(F().mark((function e(t){var n,r,o,i,u,l;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.info("Checking whether user is eligible for I2T upgrade in case of duplicate purchase"),e.next=3,P(t);case 3:if(u=e.sent,l=u.data,!((null===l||void 0===l||null===(n=l.individualToTeamUpgradeOffers)||void 0===n||null===(r=n.activeOffersResult)||void 0===r?void 0:r.filter((function(e){var t,n;return null===e||void 0===e||null===(t=e.offer)||void 0===t||null===(n=t.tags)||void 0===n?void 0:n.includes("ACTIVE_SUBSCRIPTION_I2T_UPGRADEABLE")}))).length>0&&(null===l||void 0===l||null===(o=l.individualToTeamUpgradeOffers)||void 0===o||null===(i=o.upgradeOffersResult)||void 0===i?void 0:i.offers.length)>0)){e.next=9;break}return a.info("Eligible for i2t upgrade as part of duplicate purchase from A.com"),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[P,a]),_=function(e,t,n){var r,o=null===e||void 0===e||null===(r=e.productArrangement)||void 0===r?void 0:r.family,i=n.find((function(e){return(null===e||void 0===e?void 0:e.paFamily)===o}));return t.includes(null===i||void 0===i?void 0:i.id)},O=(0,r.useCallback)(function(){var e=(0,G.Z)(F().mark((function e(t){var n,r,o,i,u,l,s,d,f,p,m,v,g,h,C,A,S;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:f=e.sent,p=f.data,m=null===p||void 0===p||null===(n=p.individualToTeamUpgradeOffers)||void 0===n?void 0:n.activeSubscriptions,v=null===p||void 0===p||null===(r=p.individualToTeamUpgradeOffers)||void 0===r||null===(o=r.activeOffersResult)||void 0===o?void 0:o.map((function(e){return{id:null===e||void 0===e?void 0:e.offer.id,paFamily:null===e||void 0===e?void 0:e.offer.productArrangement.family}})),g=null===p||void 0===p||null===(i=p.individualToTeamUpgradeOffers)||void 0===i||null===(u=i.upgradeOffersResult)||void 0===u?void 0:u.offers,h=null===y||void 0===y||null===(l=y.cart)||void 0===l||null===(s=l.cartItems)||void 0===s?void 0:s.map((function(e){var t;return null===e||void 0===e||null===(t=e.conflicts)||void 0===t?void 0:t.map((function(e){return e.offerId}))})),C=j()(h),A=null===g||void 0===g?void 0:g.map((function(e,t){var n=e.offer;if(t<m.length)return{id:n.id,q:_(n,C,v)?2:1}})).filter((function(e){return void 0!==e})),d={},(0,M.Z)(d,q().app.COUNTRY.name,t),(0,M.Z)(d,q().app.LANGUAGE.name,c),(0,M.Z)(d,q().app.CURRENT_SUBSCRIPTION_IDS.name,m),(0,M.Z)(d,q().app.ITEMS.name,A),S=d,a.info("Redirecting to i2t payment page as part of duplicate purchase from A.com"),E(S);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[P,E,c,y,a]),I=z.j$.IN_WEB;return J(z.jO,(0,W.Z)({fetchOffer:A,fetchUserSubscriptionChangeOfferAllowed:S,fetchIndividualToTeamUpgradeAllowed:b,upgradeIndividualToTeam:O,locale:"zh-hant"===c?"zh_TW":c,switchPlanSurface:I,order:y,openUrl:C,onFooterClicked:o,cancelUrl:h},i))},te=n(56),ne=n(37703),re=r.createElement;function oe(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ae=function(e){var t=e.children,n=(0,S.x)(),o=(0,te.TZ)(),i=(0,v.useCommerceAppContext)().isInApp,a=(0,K.nV)(),u=(0,r.useState)(!1),l=u[0],c=u[1],s=(0,r.useState)(void 0),d=s[0],p=s[1],m=(0,ne.useSelector)(D.NO),g=(0,r.useCallback)((function(){var e,t,r=n.readFragment({fragment:L,id:"Order:".concat(m),fragmentName:"IneligiblePurchaseOrderFragment"}),o=oe(null===r||void 0===r||null===(e=r.cart)||void 0===e?void 0:e.cartItems);try{for(o.s();!(t=o.n()).done;){var i,a=oe(t.value.conflicts);try{for(a.s();!(i=a.n()).done;){var u=i.value;if(u.reasonCode)return u.reasonCode}}catch(l){a.e(l)}finally{a.f()}}}catch(l){o.e(l)}finally{o.f()}}),[m,n]);function h(e){switch(e){case T.CartItemConflictReason.IneligibleSwitch:case T.CartItemConflictReason.IneligibleIncluded:case T.CartItemConflictReason.IneligibleDuplicateUpgrade:p(f.q.CHANGE_PLAN);break;default:p(void 0)}}return re(r.Fragment,null,re(X,{openUrl:i()?function(e){h(g()),c(!0);var t=(0,w.AK)(e);a(t)}:void 0,onFooterClicked:i()?function(){h(void 0),c(!0)}:void 0,adobeLaunchAnalytics:o}),l?re(A,{workflow:d}):t)}},6119:function(e,t,n){"use strict";n.d(t,{l:function(){return E}});var r=n(67294),o=n(88305),i=n(52007),a=n(36689),u=n(56746),l=n(39714),c=n(4190),s=n(99246),d=n(65455),f=n(40705),p=n(45110),m=n(12510),v=n(25235),g=n(37703),h=n(3971),C=r.createElement,E=function(e){return C(m.ReduxStoreProvider,{store:e.store},C(a.e,{client:e.apolloClient},C(i.AnalyticsProvider,{value:e.adobeLaunchAnalytics},C(c.FeatureFlagProvider,{value:e.features},C(u.AppErrorBoundary,{logMeta:{componentName:e.errorBoundaryComponentName,errorLoadingComponent:"LearnMoreDialog"}},C(y,e))))))},y=function(e){var t,n=e.onClose,i=e.offerContent,a=e.productArrangementCode,u=void 0===a?void 0:a,m=e.productLogoUrls,E=void 0===m?void 0:m,y=e.resourceName,A=void 0===y?"checkout/".concat(l._.LEARN_MORE_DIALOG):y,S=e.resourceContentType,T=void 0===S?"".concat(l.b.LEARN_MORE_DIALOG):S,P=e.commerceAppContext,b=void 0===P?void 0:P,_=e.defaultCategory,O=void 0===_?void 0:_,I=(0,r.useMemo)((function(){return(0,h.withAEMContent)(A,T,p.iJ)(p.qn)}),[A,T]),U=(0,c.useFeatureFlags)(s.R.P_UC_AEM_AUTHOR),k=(0,g.useSelector)(d.n$),R=(0,g.useSelector)(d.mT),L=(0,g.useStore)(),N=(0,v.T)(),x=(0,c.useFeatureFlags)([s.R.UC_FORCE_ALL_APPS_OPTIMIZATION]),w=(0,f.jO)(L.getState(),null===N||void 0===N?void 0:N.offer,x),D=(null===(t=L.getPersonalizedContentVariationByAEMQueryName)||void 0===t?void 0:t.call(L,l._.LEARN_MORE_DIALOG))||"",M=(0,r.useMemo)((function(){return{locale:"".concat(k,"-").concat(R),variables:{locale:"zh-hant"===k?"zh_TW":k,productArrangementCode:u},options:{fetch:(0,o.Z)(U[s.R.P_UC_AEM_AUTHOR]?[s.R.P_UC_AEM_AUTHOR]:[s.R.UC_AEM_PUBLISH],D)}}}),[R,U,k,u,D]);return C("div",{"data-testid":"learn-more-dialog"},C(I,{aem:M,offerContent:i,onClose:n,productLogoUrls:E,commerceAppContext:b,defaultCategory:O,showFulfillableItemsView:w}))}},93714:function(e,t,n){"use strict";n.d(t,{Z:function(){return R},h:function(){return N}});var r=n(67294),o=n(37244),i=n.n(o),a=n(26075),u=n(54147),l=n(99615),c=n(37629),s=n(99246),d=n(96029),f=n(47758),p=n(40705),m=n(61792),v=n(18983),g=n(6119),h=n(75509),C=n(56),E=n(25235),y=n(30488),A=n(34937),S=n(13164),T=n(4190),P=n(37703),b=n(12510),_=n(49865),O=n(73113),I=r.createElement,U=function(e){return function(t){var n=(0,b.useStore)(),r=(0,S.T)(),o=(0,P.useSelector)(m.Ax),v=null===o||void 0===o?void 0:o.browser,h=(0,u.VB)(u.yr),_=(0,C.TZ)(),U=(0,y.useCommerceAppContext)().hostCtxId,k=(0,a.x)(),R=(0,P.useSelector)(d.By)===i().app.LAYOUT.values.SLIM,L=(0,A.useContentEntry)(void 0,!0).get("productInfoBoxContentList"),N=(0,E.T)(),x=(0,T.useFeatureFlags)([s.R.UC_FORCE_ALL_APPS_OPTIMIZATION]);(0,p.jO)(n.getState(),null===N||void 0===N?void 0:N.offer,x)&&L&&(L.items[0].learnMoreLabel=L.items[0].newLearnMoreLabel),R&&L&&(L.items[0].learnMoreLabel="");var w=(0,O.withDialog)((function(e){var r=e.onClose,o=t.data,i=o.offerContent,a=o.productArrangementCode,u=o.productIconUrls;return I(g.l,{onClose:r,offerContent:i,productArrangementCode:a,productLogoUrls:u,commerceAppContext:U,errorBoundaryComponentName:"ProductInfoBox",store:n,apolloClient:k,adobeLaunchAnalytics:_,features:(0,f.h)()})}),{onClick:function(e){var t,n="product-info-learn-more"===(null===e||void 0===e||null===(t=e.dataset)||void 0===t?void 0:t.testid);return v===l.s.SAFARI&&h&&window.scroll(0,0),n&&r(c.P.LEARN_MORE_CLICK),n}})((function(n){var r=n.onClick,o=function(e){null===r||void 0===r||r(e.target)};return I("div",{role:"button",onKeyDown:function(e){13!==e.keyCode&&"Enter"!==e.key||(e.preventDefault(),o(e))},onClick:o},I(e,t))}));return I(w,null)}},k=U(h.Z9),R=(0,_.r)("productInfoCard",h.G6)(k),L=U(h.h8),N=(0,_.r)("productInfoBoxContent",h.qW)(L),x=(0,_.r)("languageWordOrder",v.LanguageWordOrderModel)((function(){return null})).queryCollection;R.queryCollection.merge(x)},25235:function(e,t,n){"use strict";n.d(t,{T:function(){return l}});var r=n(27261),o=n(92471),i=n(49786);function a(){var e=(0,r.Z)(["\n  fragment AllAppsOptimizationOfferFragment on PersonalizedOffer {\n    offer {\n      id\n      productArrangementCode\n    }\n  }\n"]);return a=function(){return e},e}var u=(0,o.Ps)(a()),l=function(){return(0,i.h)(u)}},47758:function(e,t,n){"use strict";n.d(t,{h:function(){return a},N:function(){return u}});var r,o=n(19291),i=n(67294);function a(e){var t=e||r||[];return(0,o.Lf)()&&!r&&(r=t),t}function u(e){return(0,i.useMemo)((function(){return a(e)}),[e])}},96909:function(e,t,n){"use strict";n.d(t,{W:function(){return f}});var r=n(20236),o=n(99246),i=n(52176),a=n(30488),u=n(69355),l=n(4190),c=n(67294),s=n(56746),d=n(12510),f=function(){var e=(0,l.useFeatureFlags)([o.R.UC_APPLE_PAY,o.R.UC_FORCE_APPLE_PAY,o.R.UC_GOOGLE_PAY,o.R.UC_FORCE_GOOGLE_PAY]),t=(0,u.useCookies)(),n=(0,d.useStore)(),f=(0,a.useCommerceAppContext)().isInApp,p=(0,c.useRef)(!1),m=(0,s.useOnAppError)((function(e){var t;if(p.current)return!0;if((null===e||void 0===e||null===(t=e.extensions)||void 0===t?void 0:t.orderCode)===i.k.PAYMENT_SYSTEM_UNAVAILABLE){var r,o=n.getState();if(null!==o&&void 0!==o&&null!==(r=o.digitalWallet)&&void 0!==r&&r.submitted)return p.current=!0,!0}return!1}));return(0,c.useMemo)((function(){return{showApplePay:!m&&e[o.R.UC_APPLE_PAY]&&(t.get(r.e.SHOW_APPLE_PAY_COOKIE)||e[o.R.UC_FORCE_APPLE_PAY]),showGooglePay:!f()&&!m&&e[o.R.UC_GOOGLE_PAY]&&(t.get(r.e.SHOW_GOOGLE_PAY_COOKIE)||e[o.R.UC_FORCE_GOOGLE_PAY])}}),[t,e,f,m])}},99615:function(e,t,n){"use strict";var r;n.d(t,{s:function(){return r}}),function(e){e.SAFARI="Safari"}(r||(r={}))},39714:function(e,t,n){"use strict";var r,o;n.d(t,{_:function(){return r},b:function(){return o}}),function(e){e.LEARN_MORE_DIALOG="learn-more-dialog",e.TEAM_UPGRADE_ADDON="team-upgrade-addon",e.TEAM_UPGRADE_PLANS="team-upgrade-plans"}(r||(r={})),function(e){e.LEARN_MORE_DIALOG="learnMoreOffer"}(o||(o={}))},15257:function(e,t,n){"use strict";n.d(t,{SQ:function(){return l},xy:function(){return c},cY:function(){return s},Z2:function(){return d}});var r=n(27361),o=n.n(r),i=n(298),a=n(90325),u=n(52253),l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,a.LR)(t,e),l=(0,i.Yd)(r,n),c=o()(l,"unifiedCheckout.flowTypeAttributes.selectedPod")||o()(l,"unifiedCheckout.flowTypeAttributes.defaultPod"),s="SelectedPod:".concat(c),d=s?(0,i.W6)("".concat(s,":").concat(u.ps.SELECT),null):void 0;return{offer:null===r||void 0===r?void 0:r.offer,flowTypeAttributes:l,selectedPodEvent:d}},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t}));if(!r)return{};var a,l,c=(0,i.lG)(r,n);return(a=c.unifiedCheckout.flowTypeAttributes.selectedBillingFrequency?"Selected:".concat(o()(c,"unifiedCheckout.flowTypeAttributes.selectedBillingFrequency"),":").concat(o()(c,"unifiedCheckout.flowTypeAttributes.selectedSubscriptionPlan")):"Selected:".concat(o()(c,"unifiedCheckout.flowTypeAttributes.defaultBillingFrequency"),":").concat(o()(c,"unifiedCheckout.flowTypeAttributes.defaultSubscriptionPlan")))&&(l=(0,i.W6)("".concat(a,":").concat(u.ps.SELECT),null)),{offer:r,flowTypeAttributes:c,selectedPodEvent:l}},s=function(e,t){var n,r,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=(null===e||void 0===e||null===(n=e.result)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.offers)||[],s=(0,a.LR)(t,c);if(null===s||void 0===s||!s.offer)return{};var d,f=null===s||void 0===s?void 0:s.offer,p=(0,i.lG)(f,l),m=o()(p,"unifiedCheckout.flowTypeAttributes.selectedBillingFrequency")||o()(p,"unifiedCheckout.flowTypeAttributes.defaultBillingFrequency"),v=o()(p,"unifiedCheckout.flowTypeAttributes.selectedSubscriptionPlan")||o()(p,"unifiedCheckout.flowTypeAttributes.defaultSubscriptionPlan"),g="Selected:".concat(m,":").concat(v);return g&&(d=(0,i.W6)("".concat(g,":").concat(u.ps.SELECT),null)),{offer:f,flowTypeAttributes:p,selectedPodEvent:d}},d=function(e,t){var n,r=null===(n=(0,a.LR)(t,e))||void 0===n?void 0:n.offer;return r?{offer:r,flowTypeAttributes:(0,i.lG)(r,!0)}:{}}},17327:function(e,t,n){"use strict";n.d(t,{G:function(){return ye}});var r=n(26265),o=n(37244),i=n.n(o),a=n(67294),u=n(79978),l=n(14834),c=n(56746),s=n(23996),d=n(34937),f=n(2385),p=n(90325),m=n(37629),v=n(52253),g=n(41681),h=n(99246),C=n(298),E=n(22965),y=n(11426),A=n(65455),S=n(62482),T=n(92488),P=n(94945),b=n(96029),_=n(61792),O=n(30137),I=n(8703),U=n(80827),k=n(96671),R=n(84248),L=n(93714),N=n(76217),x=n(52251),w=(0,d.defineContents)("SegmentationBackgroundImage",{imageUrl:{id:"imageUrl",type:x.wQ},family:{id:"family",type:"string"}}),D=(0,d.defineContents)("SegmentationHeader",{header:{id:"header",type:"string"},offerType:{id:"offerType",type:"string"},customerSegment:{id:"customerSegment",type:"string"},marketSegment:{id:"marketSegment",type:"string"},trialTermUnit:{id:"trialTermUnit",type:"string"},trialTerm:{id:"trialTerm",type:"string"}}),M=(0,d.defineContents)("SegmentationPageContent",{pageTitle:{id:"pageTitle",type:D,isArray:!0,placeholderContent:[{header:"Let's get started - Your first day is free.",offerType:"TRIAL",trialTermUnit:"DAY",trialTerm:"1"},{header:"Let's get started - Your first {trialTermUnit} days are free.",offerType:"TRIAL",trialTermUnit:"DAY"},{header:"Let's get you {productName}.",offerType:"BASE"}]},buttonContinue:{id:"buttonContinue",type:"string",placeholderContent:"Continue"},segmentationBackgroundImages:{id:"segmentationBackgroundImages",type:w,isArray:!0,placeholderContent:[{family:"DEFAULT",imageUrl:{_publishUrl:"https://publish-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/segmentation_right_side_background.png",_authorUrl:"https://author-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/segmentation_right_side_background.png"}},{family:"PHOTOSHOP",imageUrl:{_publishUrl:"https://publish-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Photoshop.jpg",_authorUrl:"https://author-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Photoshop.jpg"}},{family:"PHOTOSHOP_LIGHTROOM",imageUrl:{_publishUrl:"https://publish-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Photography.jpg",_authorUrl:"https://author-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Photography.jpg"}},{family:"ILLUSTRATOR",imageUrl:{_publishUrl:"https://publish-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Illustrator.jpg",_authorUrl:"https://author-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Illustrator.jpg"}},{family:"CC_ALL_APPS",imageUrl:{_publishUrl:"https://publish-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/CC_All_Apps.jpg",_authorUrl:"https://author-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/CC_All_Apps.jpg"}}]}}),B=n(49865),F=(0,B.r)("segmentationSelectors",x.MP)(x.DV),G=n(36623),Z=n(15257),W=n(46839),H=n(19756),j=n(93552),Y=(n(45697),n(73935)),q=!1,V=a.createContext(null),$="unmounted",z="exited",K="entering",Q="entered",J="exiting",X=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var o,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(o=z,r.appearStatus=K):o=Q:o=t.unmountOnExit||t.mountOnEnter?$:z,r.state={status:o},r.nextCallback=null,r}(0,j.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===$?{status:z}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==K&&n!==Q&&(t=K):n!==K&&n!==Q||(t=J)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===K?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===z&&this.setState({status:$})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,o=this.props.nodeRef?[r]:[Y.findDOMNode(this),r],i=o[0],a=o[1],u=this.getTimeouts(),l=r?u.appear:u.enter;!e&&!n||q?this.safeSetState({status:Q},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,a),this.safeSetState({status:K},(function(){t.props.onEntering(i,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:Q},(function(){t.props.onEntered(i,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Y.findDOMNode(this);t&&!q?(this.props.onExit(r),this.safeSetState({status:J},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:z},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:z},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Y.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=o[0],a=o[1];this.props.addEndListener(i,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===$)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,H.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return a.createElement(V.Provider,{value:null},"function"===typeof n?n(e,r):a.cloneElement(a.Children.only(n),r))},t}(a.Component);function ee(){}X.contextType=V,X.propTypes={},X.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ee,onEntering:ee,onEntered:ee,onExit:ee,onExiting:ee,onExited:ee},X.UNMOUNTED=$,X.EXITED=z,X.ENTERING=K,X.ENTERED=Q,X.EXITING=J;var te=X,ne=n(30488),re=n(37703),oe=n(13164),ie=n(4190),ae=n(61274),ue=n(62452),le=n(54147),ce=n(64718),se=n(55988),de=n(96909),fe=n(5764),pe=n(12510),me=n(52007),ve=n(21346),ge=n(60718),he=a.createElement;function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=(0,B.r)("segmentationPage",M)((function(){var e,t,n=(0,ue.eR)(U.N$.SWITCH),r=(0,se.t)().currentRoute,o=(0,me.useTrackEvent)(),x=(0,re.useSelector)(A.dm),B=x.teamAdminConsoleUrl,H=x.teamCCPlansUrl,j=x.teamCCEduPlansUrl,Y=x.teamDocumentPlansUrl,q=x.desktopTrialDownloadUrl,V=(0,re.useSelector)(_.H0),$=(0,d.useContentEntry)(M),z=(0,le.VB)(),K=(0,a.useState)(""),Q=K[0],J=K[1],X=(0,fe.R_)(),ee=X.goToNextStep,Ce=X.hasPreviousStep,ye=(0,pe.useStore)().getState(),Ae=(0,re.useSelector)(A.mT),Se=(0,re.useSelector)(A.n$),Te=i().app,Pe=Te.PA_CODE,be=Te.MARKET_SEGMENT,_e=Te.OFFER_TYPE,Oe=Te.ORIGINAL_OFFER_ID,Ie=Te.CLIENT_ID,Ue=Te.SVAR,ke=(0,ne.useCommerceAppContext)().isInApp,Re=(0,ue.nV)(),Le=(0,ue.nV)(g.ki.BUSINESS_TRIAL),Ne=(0,a.useState)(!1),xe=Ne[0],we=Ne[1],De=(0,re.useSelector)(b.vl),Me=De[Pe.name],Be=De[be.name],Fe=De[_e.name],Ge=De[Ie.name],Ze=De[Ue.name],We=(0,re.useSelector)(_.et).userId,He=(0,re.useSelector)(y.tT),je=(0,y.Nk)().clearBundleSourceOffer,Ye=(0,re.useDispatch)(),qe=(0,re.useSelector)(A.S2),Ve=(0,re.useSelector)(A.Im),$e=(0,de.W)(),ze=$e.showApplePay,Ke=$e.showGooglePay,Qe=(0,ae.d0)(),Je=(0,ve.z)(),Xe=(0,ie.useFeatureFlags)([h.R.P_UC_USE_TEST_CAMPAIGNS])[h.R.P_UC_USE_TEST_CAMPAIGNS],et=(0,ie.useFeatureFlags)([h.R.UC_M5])[h.R.UC_M5],tt=(0,ce.a)(E.j_,{variables:(0,E.WC)(Ae,Me,Se,Fe,We,Ge,Ze,Qe,Xe)}).data.segmentationOffers,nt=(null===tt||void 0===tt||null===(e=tt.result)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.offers)||[];if(!et&&!qe){for(var rt=JSON.parse(JSON.stringify(nt)),ot=0;ot<rt.length;ot++){var it,at=null===(it=rt[ot])||void 0===it?void 0:it.offer;if((null===at||void 0===at?void 0:at.offerType)===R.R.TRIAL&&(null===at||void 0===at?void 0:at.customerSegment)===f.op.Team){rt[ot].offer.promotion.promotionTermValue=7;break}}nt=JSON.parse(JSON.stringify(rt))}var ut=(0,p.V$)(De,nt),lt=(0,a.useState)(ut),ct=lt[0],st=lt[1],dt=(0,a.useRef)({isDefaultSegmentSelected:!0});(0,a.useEffect)((function(){He&&je()}),[je,He]);var ft=(0,oe.T)();(0,a.useEffect)((function(){if(ct){if(dt.current.isDefaultSegmentSelected){ft(m.P.PAGE_LOAD,{offers:nt,selectedOfferId:ct});var e=(0,Z.SQ)(nt,ct,!0),t=e.offer,n=e.selectedPodEvent,o=e.flowTypeAttributes,i=(0,C.Nf)(t,o,ye,et,v.RC.EVENT_STATE_TYPE,n,qe,r,ze,Ke);Je(i)}else{ft(m.P.SEGMENT_SELECTED,{offers:nt,selectedOfferId:ct});var a=(0,Z.SQ)(nt,ct,!1),u=a.offer,l=a.selectedPodEvent,c=a.flowTypeAttributes,s=(0,C.Nf)(u,c,ye,et,v.RC.EVENT_LINK_TYPE,l,qe,r);Je(s)}dt.current.isDefaultSegmentSelected=!1}}),[ct]);function pt(){return nt.find((function(e){return(null===e||void 0===e?void 0:e.offer.id)===ct}))}var mt=function(e,t){var n;return null===(n=nt.find((function(n){return(null===n||void 0===n?void 0:n.offer.customerSegment)===e&&(null===n||void 0===n?void 0:n.offer.marketSegments.includes(t))})))||void 0===n?void 0:n.offer};var vt=function(e,t){return function(e,t){return t===f.op.Individual&&e.includes(f.ii.Com)}(e,t)?"":Q};var gt=function(e){if(!e)return null;var t,n,r=e.offerType===f.m_.Promotion,o=!!e.appliedPromotions;return r?e.marketSegments.includes(f.ii.Edu)?null===(t=e.marketSegmentAltPrice)||void 0===t||null===(n=t.offerPriceDisplay)||void 0===n?void 0:n.displayUnitPrice:e.offerPriceDisplay.displayBaseUnitPrice:o?e.offerPriceDisplay.displayBaseUnitPrice:void 0},ht=function(e){return $.search(w).find((function(t){return t.get(w.family)===String(e).toUpperCase()}))};return he(a.Fragment,null,xe?he(O.b,{workflow:V?I.q.TEAM_ADMIN:I.q.BUSINESS_TRIAL}):he(ge.Ru,null,he(ge.uN,null,he(W.l,{title:function(){var e,t,n=null===(e=pt())||void 0===e?void 0:e.offer,r=n||{},o=r.offerType,i=r.promotion,a=(0,P.p)($.get(M.pageTitle),o,i);return D.createEntry(a).format(D.header,{trialTermUnit:null===i||void 0===i?void 0:i.promotionTermValue,productName:null===n||void 0===n||null===(t=n.offerContent)||void 0===t?void 0:t.productName})}()}),he("div",{className:u.Z.segmentationContainer},he(F,{defaultSelectionOfferId:ct,code:Me,marketSegment:Be,segmentations:nt,onSelect:function(e){return function(e){var t=null===e||void 0===e?void 0:e.id;st(t),Ye((0,G.$C)(t)),J(null===e||void 0===e?void 0:e.title)}(e)}})),he(l.s,{ctaLabel:$.get(M.buttonContinue),onCtaClick:function(){var e,t,r=(0,C.W6)("".concat(v.Fp.PAGE_SEGMENTATION,":").concat(v.ps.CONTINUE,":").concat(v.ps.CLICK),v.ps.CONTINUE);o(r);var i=null!==(e=null===(t=pt())||void 0===t?void 0:t.offer)&&void 0!==e?e:{},a=i.customerSegment,u=i.offerType;if(a===f.op.Team)!function(e){if(V)ke()?(we(!0),Re((0,S.AK)(B))):n(B);else if(e===R.R.TRIAL)if(et||qe){var t=(0,S.dy)(ct,Ae,Se);ke()?(we(!0),Le(t)):n(t)}else{var r=(0,T.getLocalizedURL)(q,Ve);n(r)}else{var o,i,a,u,l=(null===(o=pt())||void 0===o?void 0:o.offer)||{};a=(null===(i=l.productArrangement)||void 0===i?void 0:i.cloud)===s.e.DOCUMENT?Y:null!==(u=l.marketSegments)&&void 0!==u&&u.includes(f.ii.Com)?H:j,ke()?(we(!0),Re((0,S.AK)(a))):n(a)}}(u);else{var l,c=[{id:ct}],d=Ee(Ee({},De),{},{items:c});if(function(){var e,t=mt(f.op.Individual,f.ii.Com),n=mt(f.op.Individual,f.ii.Edu),r=null===(e=pt())||void 0===e?void 0:e.offer;return t&&n&&t.productArrangement.family!==n.productArrangement.family&&(null===r||void 0===r?void 0:r.marketSegments.includes(f.ii.Edu))}())d[Oe.name]=null===(l=mt(f.op.Individual,f.ii.Com))||void 0===l?void 0:l.id;ee(d)}},showBackButton:Ce()})),function(){var e,t=function(){var e,t,n,r=null===(e=pt())||void 0===e?void 0:e.offer,o=r||{},i=o.offerContent,a=o.marketSegments,u=o.customerSegment,l=o.offerPriceDisplay,c=o.productArrangementCode,s=o.term,d=o.offerType,m=o.promotion,v=o.currency,g=o.productArrangement,h=o.processingInstructions,C=i||{},E=C.productName,y=C.productDescription,A=C.productIconUrls,S=mt(f.op.Individual,f.ii.Com),T=(null===S||void 0===S||null===(t=S.offerContent)||void 0===t?void 0:t.productName)||"",P=(null===S||void 0===S?void 0:S.productArrangementCode)||c,b=(0,p.QK)(l.priceDisplay),_={recurrenceTerm:k.g.Yearly===s?N.RecurrenceTerm.YEAR:N.RecurrenceTerm.MONTH,formatString:null===v||void 0===v?void 0:v.formatString,isTaxInclusive:b,taxTerm:(0,p.Mo)(null===r||void 0===r?void 0:r.offerPriceDisplay)},O={usePrecision:null===v||void 0===v?void 0:v.precision};null!==l&&void 0!==l&&l.displayUnitPrice&&(n={data:Ee({price:l.displayUnitPrice},_),options:O});var I={offerType:d,customerSegment:u,marketSegments:a,promotion:m,processingInstructions:h},U=gt(r);return Ee(Ee({productArrangementCode:c,productName:E,productDescription:y,subtitle:vt(a,u),productIconUrls:A,offerContent:i,offerType:d,promotion:m,startingPrice:n},U?{strikethroughPrice:{data:Ee({price:U},_),options:O}}:{}),{},{productArrangement:g,clarityTermsProps:I,includedProductName:T,includedProductArrangementCode:P})}(),n=null===t||void 0===t||null===(e=t.productArrangement)||void 0===e?void 0:e.family,r=ct?function(e){var t,n,r,o=ht(e);return o?null===o||void 0===o||null===(t=o.get(w.imageUrl))||void 0===t?void 0:t._publishUrl:null===(n=ht("DEFAULT"))||void 0===n||null===(r=n.get(w.imageUrl))||void 0===r?void 0:r._publishUrl}(n):"",o=z?"Y":"X",i={entering:{opacity:0,transform:"translate".concat(o,"(").concat("30%",")")},entered:{opacity:1,transform:"translate".concat(o,"(0)")}};return he(te,{appear:!0,in:!0,timeout:600},(function(e){return he(c.AppErrorBoundary,{logMeta:{componentName:"Segmentation",errorLoadingComponent:"WizardLayoutDetailsPanel"}},he(ge.Wh,{className:u.Z.segmentationDetailsPanel,style:Ee({opacity:0,transform:"translate".concat(o,"(").concat("30%",")"),transition:"all ".concat(600,"ms ease-in-out")},i[e])},he("div",{className:u.Z.backgroundImageContainer,role:"img","data-testid":"productImage",style:{backgroundImage:"url(".concat(r||"",")")}}),he("div",{className:u.Z.productCardContainer},ct&&he(L.Z,{data:t}))))}))}()))})),Ae=ye.queryCollection;Ae.merge(ge.Ru.queryCollection),Ae.merge(L.Z.queryCollection),Ae.merge(F.queryCollection)},84054:function(e,t,n){"use strict";n.d(t,{vI:function(){return r.G},VQ:function(){return o.VQ},j_:function(){return o.j_},tH:function(){return o.tH},WC:function(){return o.WC}});var r=n(17327),o=n(22965)}}]);